{"version":3,"sources":["utils/formatter.ts","components/Card/Card.component.tsx","components/CardForm/CardForm.component.tsx","pages/Paycard/Paycard.page.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["toRefKey","focusSection","key","split","i","length","a","substring","toUpperCase","b","Card","cardSide","handleSetFocusSection","handleSetIsInputFocused","props","useState","width","height","transform","focusBoxStyle","setFocusBoxStyle","ccNumberRef","useRef","ccNameRef","ccExpRef","ccCvcRef","cardItemRefs","useMemo","useEffect","refKey","target","current","offsetWidth","offsetHeight","offsetLeft","offsetTop","cardNumberRow","Array","from","forEach","_","idx","includes","push","className","SwitchTransition","CSSTransition","cardNumber","classNames","addEndListener","node","done","addEventListener","cardExpirationDate","replace","cardExpirationMonth","cardExpirationYear","style","src","alt","onClick","ref","cardHolder","cardCVC","CardForm","handleRotateCard","dispatch","isInputFocused","isInputFocusedRef","ccExpMonthRef","ccExpYearRef","ccCVCRef","inputRefs","setInputRefFocus","useCallback","focus","handleInputBlur","setTimeout","onSubmit","e","preventDefault","htmlFor","type","id","autoComplete","maxLength","value","onChange","newCardNumber","charAt","trim","test","payload","onFocus","onBlur","autoFocus","name","defaultValue","disabled","map","newValue","reducer","state","action","slice","Error","Paycard","React","useReducer","cardState","rotateCard","setFocusSection","setIsInputFocused","section","bool","cardProps","cardFormProps","side","App","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.816e62e6.chunk.js","sourcesContent":["export function toRefKey(focusSection: string) {\r\n  let key = focusSection.split(\"-\")[0];\r\n  for (let i = 1; i < focusSection.split(\"-\").length; i++) {\r\n    const a = focusSection.split(\"-\")[1].substring(0, 1).toUpperCase();\r\n    const b = focusSection.split(\"-\")[1].substring(1);\r\n    key = `${key}${a}${b}`;\r\n  }\r\n  key = `${key}Ref`;\r\n  return key;\r\n}\r\n","import React, { useRef, useState, useEffect, useMemo } from \"react\";\r\nimport \"./Card.styles.scss\";\r\nimport { CardState } from \"../../pages/Paycard/Paycard.page\";\r\nimport { SwitchTransition, CSSTransition } from \"react-transition-group\";\r\nimport { toRefKey } from \"../../utils\";\r\n\r\ninterface CardProps extends CardState {\r\n  cardSide: string;\r\n  focusSection: string;\r\n  handleSetFocusSection: (section: string) => void;\r\n  isInputFocused: boolean;\r\n  handleSetIsInputFocused: (bool: boolean) => void;\r\n}\r\n\r\nconst Card: React.FC<CardProps> = ({\r\n  cardSide,\r\n  handleSetFocusSection,\r\n  handleSetIsInputFocused,\r\n  focusSection,\r\n  ...props\r\n}) => {\r\n  const [focusBoxStyle, setFocusBoxStyle] = useState({\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    transform: \"null\",\r\n  });\r\n\r\n  const ccNumberRef = useRef() as React.MutableRefObject<HTMLDivElement>;\r\n  const ccNameRef = useRef() as React.MutableRefObject<HTMLDivElement>;\r\n  const ccExpRef = useRef() as React.MutableRefObject<HTMLDivElement>;\r\n  const ccCvcRef = useRef() as React.MutableRefObject<HTMLDivElement>;\r\n\r\n  type CardItemRefs = {\r\n    [index: string]: React.MutableRefObject<HTMLDivElement>;\r\n  };\r\n\r\n  const cardItemRefs: CardItemRefs = useMemo(\r\n    () => ({\r\n      ccNumberRef,\r\n      ccNameRef,\r\n      ccExpRef,\r\n      ccCvcRef,\r\n    }),\r\n    [ccNumberRef, ccNameRef, ccExpRef, ccCvcRef]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!focusSection) return;\r\n\r\n    const refKey = toRefKey(focusSection);\r\n    const target = cardItemRefs[refKey].current;\r\n    setFocusBoxStyle({\r\n      width: `${target.offsetWidth}px`,\r\n      height: `${target.offsetHeight}px`,\r\n      transform: `translate(${target.offsetLeft}px, ${target.offsetTop}px)`,\r\n    });\r\n  }, [focusSection, cardItemRefs]);\r\n\r\n  // 卡片號碼\r\n  let cardNumberRow: Array<JSX.Element> = [];\r\n  Array.from({ length: 19 }).forEach((_, idx) => {\r\n    if ([4, 9, 14].includes(idx)) {\r\n      cardNumberRow.push(\r\n        <span className=\"card__card-number--space\" key={`space-${idx}`}></span>\r\n      );\r\n    } else {\r\n      // cardNumberRow.push(<span key={`card-number-${idx}`}>{cardNumber}</span>);\r\n      cardNumberRow.push(\r\n        <SwitchTransition key={`card-number-${idx}`}>\r\n          <CSSTransition\r\n            key={idx < props.cardNumber.length ? props.cardNumber[idx] : \"#\"}\r\n            classNames=\"slide-up\"\r\n            addEndListener={(node, done) =>\r\n              node.addEventListener(\"transitionend\", done, false)\r\n            }\r\n          >\r\n            <span>\r\n              {idx < props.cardNumber.length ? props.cardNumber[idx] : \"#\"}\r\n            </span>\r\n          </CSSTransition>\r\n        </SwitchTransition>\r\n      );\r\n    }\r\n  });\r\n\r\n  let cardExpirationDate = \"MM/YY\";\r\n  cardExpirationDate = cardExpirationDate.replace(\r\n    /MM/,\r\n    props.cardExpirationMonth || \"MM\"\r\n  );\r\n  cardExpirationDate = cardExpirationDate.replace(\r\n    /YY/,\r\n    props.cardExpirationYear || \"YY\"\r\n  );\r\n\r\n  return (\r\n    <div className={`card ${cardSide === \"back\" && \"card--is-flipped\"}`}>\r\n      <div className=\"card__front\">\r\n        <div\r\n          className={`card__focus-box ${\r\n            !!focusSection && `card__focus-box--active`\r\n          }`}\r\n          style={focusBoxStyle}\r\n        />\r\n        <div className=\"card__background\">\r\n          <img src=\"https://i.imgur.com/5XHCjPT.jpg\" alt=\"\" />\r\n        </div>\r\n        <div className=\"card__wrapper\">\r\n          <div className=\"card__top\">\r\n            <div className=\"card__chip-icon\">\r\n              <img src=\"https://i.imgur.com/7xhP2ZA.png\" alt=\"\" />\r\n            </div>\r\n            <div className=\"card__visa-icon\">\r\n              <img src=\"https://i.imgur.com/lokBLnp.png\" alt=\"\" />\r\n            </div>\r\n          </div>\r\n          <div\r\n            className=\"card__card-number\"\r\n            onClick={() => {\r\n              handleSetFocusSection(\"cc-number\");\r\n              handleSetIsInputFocused(true);\r\n            }}\r\n            ref={cardItemRefs.ccNumberRef}\r\n          >\r\n            {cardNumberRow}\r\n          </div>\r\n          <div className=\"card__content\">\r\n            <div\r\n              className=\"card__card-holder\"\r\n              onClick={() => {\r\n                handleSetFocusSection(\"cc-name\");\r\n                handleSetIsInputFocused(true);\r\n              }}\r\n              ref={cardItemRefs.ccNameRef}\r\n            >\r\n              <div className=\"card__card-holder-title\">Card Holder</div>\r\n              <div className=\"card__card-holder-name\">\r\n                {props.cardHolder || \"FULL NAME\"}\r\n              </div>\r\n            </div>\r\n            <div\r\n              className=\"card__expires\"\r\n              onClick={() => {\r\n                handleSetFocusSection(\"cc-exp\");\r\n                handleSetIsInputFocused(true);\r\n              }}\r\n              ref={cardItemRefs.ccExpRef}\r\n            >\r\n              <div className=\"card__expires-title\">Expires</div>\r\n              <div className=\"card__expires-date\">{cardExpirationDate}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"card__back\">\r\n        <div\r\n          className={`card__focus-box ${\r\n            !!focusSection && `card__focus-box--active`\r\n          }`}\r\n          style={focusBoxStyle}\r\n        />\r\n        <div className=\"card__background\">\r\n          <img src=\"https://i.imgur.com/5XHCjPT.jpg\" alt=\"\" />\r\n        </div>\r\n        <div className=\"card__top\">\r\n          <div className=\"card__black-line\"></div>\r\n        </div>\r\n        <div className=\"card__card-cvc\">\r\n          <div className=\"card__card-cvc-title\">\r\n            <span ref={cardItemRefs.ccCvcRef}>{props.cardCVC || \"CVC\"}</span>\r\n          </div>\r\n          <div className=\"card__card-cvc-number\"></div>\r\n        </div>\r\n        <div className=\"card__bottom\">\r\n          <div className=\"card__visa-icon\">\r\n            <img src=\"https://i.imgur.com/lokBLnp.png\" alt=\"\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React, { useEffect, useRef, useCallback, useMemo } from \"react\";\r\nimport \"./CardForm.styles.scss\";\r\nimport { ReducerAction, CardState } from \"../../pages/Paycard/Paycard.page\";\r\nimport { toRefKey } from \"../../utils\";\r\n\r\ninterface CardFromProps extends CardState {\r\n  handleRotateCard: (side: string) => void;\r\n  dispatch: React.Dispatch<ReducerAction>;\r\n  focusSection: string;\r\n  handleSetFocusSection: (section: string) => void;\r\n  isInputFocused: boolean;\r\n  handleSetIsInputFocused: (bool: boolean) => void;\r\n}\r\n\r\nconst CardForm: React.FC<CardFromProps> = ({\r\n  handleRotateCard,\r\n  focusSection,\r\n  handleSetFocusSection,\r\n  dispatch,\r\n  isInputFocused,\r\n  handleSetIsInputFocused,\r\n  ...props\r\n}) => {\r\n  const isInputFocusedRef = useRef(isInputFocused);\r\n  isInputFocusedRef.current = isInputFocused;\r\n\r\n  const ccNumberRef = useRef() as React.MutableRefObject<HTMLInputElement>;\r\n  const ccNameRef = useRef() as React.MutableRefObject<HTMLInputElement>;\r\n  const ccExpMonthRef = useRef() as React.MutableRefObject<HTMLSelectElement>;\r\n  const ccExpYearRef = useRef() as React.MutableRefObject<HTMLSelectElement>;\r\n  const ccCVCRef = useRef() as React.MutableRefObject<HTMLInputElement>;\r\n\r\n  type InputRefs = {\r\n    [index: string]: React.MutableRefObject<\r\n      HTMLInputElement | HTMLSelectElement\r\n    >;\r\n  };\r\n\r\n  const inputRefs: InputRefs = useMemo(\r\n    () => ({\r\n      ccNumberRef,\r\n      ccNameRef,\r\n      ccExpMonthRef,\r\n      ccExpYearRef,\r\n      ccCVCRef,\r\n    }),\r\n    [ccNumberRef, ccNameRef, ccExpMonthRef, ccExpYearRef, ccCVCRef]\r\n  );\r\n\r\n  const setInputRefFocus = useCallback(\r\n    (focusSection: string) => {\r\n      if (!focusSection) return;\r\n      let key = toRefKey(focusSection);\r\n      if (key === \"ccExpRef\") {\r\n        key = \"ccExpMonthRef\";\r\n      }\r\n      inputRefs[key]?.current.focus();\r\n    },\r\n    [inputRefs]\r\n  );\r\n\r\n  const handleUpdateCardNumber = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const re = /^(\\d{0,4}\\s?){0,4}$/;\r\n\r\n    const newCardNumber = e.target.value.replace(/\\s/g, \"\");\r\n    let cardNumber = \"\";\r\n\r\n    for (let i = 0; i < newCardNumber.length; i++) {\r\n      cardNumber += newCardNumber.charAt(i);\r\n      if ([3, 7, 11].includes(i)) {\r\n        cardNumber += \" \";\r\n      }\r\n    }\r\n    cardNumber = cardNumber.trim();\r\n    if (newCardNumber === \"\" || re.test(newCardNumber)) {\r\n      dispatch({ type: \"updateCardNumber\", payload: cardNumber });\r\n    }\r\n  };\r\n\r\n  const handleUpdateCardCVC = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newValue = e.target.value;\r\n    const re = /^\\d+$/;\r\n    if (newValue === \"\" || re.test(newValue)) {\r\n      dispatch({ type: \"updateCardCVC\", payload: e.target.value });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  useEffect(() => {\r\n    setInputRefFocus(focusSection);\r\n  }, [focusSection, setInputRefFocus]);\r\n\r\n  const handleInputBlur = () => {\r\n    setTimeout(() => {\r\n      if (!isInputFocusedRef.current) {\r\n        handleSetFocusSection(\"\");\r\n      }\r\n    }, 300);\r\n    handleSetIsInputFocused(false);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"card-form\">\r\n      <div className=\"form-group card-form__cc-number\">\r\n        <label htmlFor=\"card-number\">Card Number</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"card-number\"\r\n          autoComplete=\"off\"\r\n          maxLength={19}\r\n          value={props.cardNumber}\r\n          onChange={handleUpdateCardNumber}\r\n          onFocus={() => {\r\n            handleRotateCard(\"front\");\r\n            handleSetFocusSection(\"cc-number\");\r\n            handleSetIsInputFocused(true);\r\n          }}\r\n          onBlur={handleInputBlur}\r\n          ref={\r\n            inputRefs.ccNumberRef as React.MutableRefObject<HTMLInputElement>\r\n          }\r\n          autoFocus\r\n        />\r\n      </div>\r\n      <div className=\"form-group card-form__cc-name\">\r\n        <label htmlFor=\"card-holder\">Card Holder</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"card-holder\"\r\n          autoComplete=\"off\"\r\n          maxLength={20}\r\n          onChange={(e) => {\r\n            dispatch({ type: \"updateCardHolder\", payload: e.target.value });\r\n          }}\r\n          onFocus={() => {\r\n            handleRotateCard(\"front\");\r\n            handleSetFocusSection(\"cc-name\");\r\n            handleSetIsInputFocused(true);\r\n          }}\r\n          onBlur={handleInputBlur}\r\n          autoFocus={focusSection === \"cc-name\"}\r\n          ref={inputRefs.ccNameRef as React.MutableRefObject<HTMLInputElement>}\r\n        />\r\n      </div>\r\n      <div className=\"form-group card-form__cc-exp\">\r\n        <label htmlFor=\"card-expiration-month\">Expiration Date</label>\r\n        <div className=\"row\">\r\n          <select\r\n            name=\"\"\r\n            id=\"card-expiration-month\"\r\n            defaultValue=\"Month\"\r\n            onChange={(e) => {\r\n              dispatch({\r\n                type: \"updateCardExpirationMonth\",\r\n                payload: e.target.value,\r\n              });\r\n            }}\r\n            onFocus={() => {\r\n              handleRotateCard(\"front\");\r\n              handleSetFocusSection(\"cc-exp\");\r\n              handleSetIsInputFocused(true);\r\n            }}\r\n            onBlur={handleInputBlur}\r\n            ref={\r\n              inputRefs.ccExpMonthRef as React.MutableRefObject<\r\n                HTMLSelectElement\r\n              >\r\n            }\r\n          >\r\n            <option disabled>Month</option>\r\n            {Array.from({ length: 12 }).map((_, idx) => (\r\n              <option key={idx}>{idx + 1}</option>\r\n            ))}\r\n          </select>\r\n          <select\r\n            name=\"\"\r\n            id=\"card-expiration-year\"\r\n            defaultValue=\"Year\"\r\n            onChange={(e) => {\r\n              dispatch({\r\n                type: \"updateCardExpirationYear\",\r\n                payload: e.target.value,\r\n              });\r\n            }}\r\n            onFocus={() => {\r\n              handleRotateCard(\"front\");\r\n              handleSetFocusSection(\"cc-exp\");\r\n              handleSetIsInputFocused(true);\r\n            }}\r\n            onBlur={handleInputBlur}\r\n            ref={\r\n              inputRefs.ccExpYearRef as React.MutableRefObject<\r\n                HTMLSelectElement\r\n              >\r\n            }\r\n          >\r\n            <option disabled>Year</option>\r\n            {Array.from({ length: 12 }).map((_, idx) => (\r\n              <option key={idx}>{2020 + idx}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className=\"form-group card-form__cc-cvc\">\r\n        <label htmlFor=\"card-cvc\">CVC</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"card-cvc\"\r\n          maxLength={3}\r\n          value={props.cardCVC}\r\n          onChange={handleUpdateCardCVC}\r\n          onFocus={() => {\r\n            handleRotateCard(\"back\");\r\n            handleSetFocusSection(\"cc-cvc\");\r\n            handleSetIsInputFocused(true);\r\n          }}\r\n          onBlur={handleInputBlur}\r\n          ref={inputRefs.ccCVCRef as React.MutableRefObject<HTMLInputElement>}\r\n        />\r\n      </div>\r\n      <button type=\"submit\" className=\"card-form__submit-btn\">\r\n        Submit\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default CardForm;\r\n","import React from \"react\";\r\nimport \"./Paycard.styles.scss\";\r\nimport Card from \"../../components/Card/Card.component\";\r\nimport CardForm from \"../../components/CardForm/CardForm.component\";\r\n\r\nexport interface CardState {\r\n  cardNumber: string;\r\n  cardHolder: string;\r\n  cardExpirationMonth: string;\r\n  cardExpirationYear: string;\r\n  cardCVC: string;\r\n}\r\n\r\nexport interface ReducerAction {\r\n  type: string;\r\n  payload: any;\r\n}\r\n\r\nfunction reducer(state: CardState, action: ReducerAction): CardState {\r\n  switch (action.type) {\r\n    case \"updateCardNumber\":\r\n      return { ...state, cardNumber: action.payload };\r\n    case \"updateCardHolder\":\r\n      return { ...state, cardHolder: action.payload };\r\n    case \"updateCardExpirationMonth\":\r\n      return {\r\n        ...state,\r\n        cardExpirationMonth: (\"0\" + action.payload).slice(-2),\r\n      };\r\n    case \"updateCardExpirationYear\":\r\n      return { ...state, cardExpirationYear: action.payload.slice(2) };\r\n    case \"updateCardCVC\":\r\n      return { ...state, cardCVC: action.payload };\r\n    default:\r\n      throw new Error();\r\n  }\r\n}\r\n\r\nconst Paycard = () => {\r\n  const initialCardState: CardState = {\r\n    cardNumber: \"\",\r\n    cardHolder: \"\",\r\n    cardExpirationMonth: \"\",\r\n    cardExpirationYear: \"\",\r\n    cardCVC: \"\",\r\n  };\r\n  const [cardState, dispatch] = React.useReducer(reducer, initialCardState);\r\n  const [cardSide, rotateCard] = React.useState(\"front\");\r\n  const [focusSection, setFocusSection] = React.useState(\"cc-number\");\r\n  const [isInputFocused, setIsInputFocused] = React.useState(true);\r\n\r\n  const handleRotateCard = (side: string) => {\r\n    rotateCard(side);\r\n  };\r\n\r\n  const handleSetFocusSection = (section: string) => {\r\n    setFocusSection(section);\r\n  };\r\n\r\n  const handleSetIsInputFocused = (bool: boolean) => {\r\n    setIsInputFocused(bool);\r\n  };\r\n\r\n  const cardProps = {\r\n    cardSide,\r\n    focusSection,\r\n    handleSetFocusSection,\r\n    isInputFocused,\r\n    handleSetIsInputFocused,\r\n    ...cardState,\r\n  };\r\n\r\n  const cardFormProps = {\r\n    handleRotateCard,\r\n    focusSection,\r\n    handleSetFocusSection,\r\n    isInputFocused,\r\n    handleSetIsInputFocused,\r\n    dispatch,\r\n    ...cardState,\r\n  };\r\n\r\n  return (\r\n    <div className=\"paycard\">\r\n      <Card {...cardProps} />\r\n      <CardForm {...cardFormProps} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Paycard;\r\n","import React from 'react';\nimport './App.css';\nimport Paycard from './pages/Paycard/Paycard.page'\n\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <Paycard />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}